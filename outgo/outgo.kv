#:kivy 1.8.0

#:import Window kivy.core.window.Window
#:import main main

#:set col_number 3
#:set row_number 7

<OutgoRoot>:
    carousel: carousel
    input_widget: input_widget
    list_widget: list_widget

    Carousel:
        id: carousel
        width: Window.width
        height: Window.height
        loop: True
        InputWidget:
            id: input_widget
        ListWidget:
            id: list_widget

<InputWidget>:
    number_display: number_display
    category_spinner: category_spinner
    target_y: target_y
    target_n: target_n

    TextInput:
        id: number_display
        width: Window.width
        height: Window.height / row_number
        top: root.top
        text_size: self.size
        font_size: 36
        text: ''

    Spinner:
        id: category_spinner
        width: Window.width
        height: Window.height / row_number
        top: root.height * 6 / row_number
        font_size: 36
        text_autoupdate: True
        values: root.build_category()

    TargetButton:
        id: target_y
        top: root.height * 5 / row_number
        text: 'y'
        state: 'down'
        on_press: root.select_y()

    TargetButton:
        id: target_n
        right: root.width * 2 / col_number
        top: root.height * 5 / row_number
        text: 'n'
        on_press: root.select_n()

    InputButton:
        id: number_btn_bs
        text: 'BS'
        right: root.width
        top: root.height * 5 / row_number
        on_press: root.backspace()

    InputButton:
        text: '1'
        top: root.height * 2 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '2'
        right: root.width * 2 / col_number
        top: root.height * 2 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '3'
        right: root.width
        top: root.height * 2 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '4'
        top: root.height * 3 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '5'
        right: root.width * 2 / col_number
        top: root.height * 3 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '6'
        right: root.width
        top: root.height * 3 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '7'
        top: root.height * 4 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '8'
        right: root.width * 2 / col_number
        top: root.height * 4 / row_number
        on_press: root.input_number(self)

    InputButton:
        text: '9'
        right: root.width
        top: root.height * 4 / row_number
        on_press: root.input_number(self)

    Button:
        text: 'Enter'
        width: Window.width / 2
        height: Window.height / row_number
        font_size: 36
        right: root.width
        on_press: root.enter(app.root)

    Button:
        text: 'Cancel'
        width: Window.width / 2
        height: Window.height / row_number
        font_size: 36
        right: root.width / 2
        on_press: root.cancel(app.root)

<ListWidget>:
    ListLabelWidget:
    ListEditBtnWidget:
    ListDelBtnWidget:

<ListLabelWidget>:
    ListView:
        width: Window.width * 2 / col_number
        height: Window.height
        adapter: root.build_adapter()

<ListItemLabelWidget>:
    width: Window.width * 2 / col_number
    height: Window.height / row_number
    text: root.print_item()
    font_size: 18

<ListEditBtnWidget>:
    ListView:
        width: Window.width / col_number / 2
        height: Window.height
        right: Window.width * 5 / col_number / 2
        adapter: root.build_adapter()

<ListItemEditBtnWidget>:
    width: Window.width / col_number / 2
    height: Window.height / row_number
    text: 'Edit'
    font_size: 18
    on_press: main.move_to_input(app.root)

<ListDelBtnWidget>:
    ListView:
        width: Window.width / col_number / 2
        height: Window.height
        right: Window.width
        adapter: root.build_adapter()

<ListItemDelBtnWidget>:
    width: Window.width / col_number / 2
    height: Window.height / row_number
    text: 'Del'
    font_size: 18
    on_press: main.move_to_input(app.root)

<InputButton@Button>:
    font_size: 36
    width: Window.width / col_number
    height: Window.height / row_number

<TargetButton@ToggleButton>:
    font_size: 36
    width: Window.width / col_number
    height: Window.height / row_number
    group: 'target'
